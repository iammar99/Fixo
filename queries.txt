CREATE DATABASE fixo;

USE fixo;

CREATE TABLE providers (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(150) NOT NULL UNIQUE,
    phone VARCHAR(20),
    password VARCHAR(255) NOT NULL,
    address TEXT,
    service VARCHAR(100),
    rating DECIMAL(2,1) DEFAULT 0.0,
    availability ENUM('available', 'busy', 'offline') DEFAULT 'available',
    isAdmin TINYINT(1) DEFAULT 0,
    status TINYINT(1) DEFAULT 0,
    createdat TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE clients ( 
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(150) NOT NULL UNIQUE,
    phone VARCHAR(20),
    password VARCHAR(255) NOT NULL,
    address TEXT,
    isAdmin TINYINT(1) DEFAULT 0,
    status TINYINT(1) DEFAULT 0,
    createdat TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE bookings (
    id INT AUTO_INCREMENT PRIMARY KEY,
    client_id INT NOT NULL,
    provider_id INT NOT NULL,
    problem_type VARCHAR(50),
    problem_description TEXT,
    status ENUM('pending', 'accepted', 'in_progress', 'completed', 'cancelled') DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (client_id) REFERENCES clients(id) ON DELETE CASCADE,
    FOREIGN KEY (provider_id) REFERENCES providers(id) ON DELETE CASCADE
);

INSERT INTO providers 
(name, email, phone, password, address, service, rating, availability, isAdmin, status) 
VALUES
('Jim Hopper', 'jim.hopper@hawkins.com', '1111111111', 'hashed_hopper', 'Hawkins Police Dept, IN', 'Security & Repairs', 4.7, 'available', 0, 1),
('Joyce Byers', 'joyce.byers@hawkins.com', '2222222222', 'hashed_joyce', 'Byers House, Hawkins, IN', 'Electrical Repair', 4.3, 'busy', 0, 1),
('Steve Harrington', 'steve.harrington@scoops.com', '3333333333', 'hashed_steve', 'Starcourt Mall, Hawkins, IN', 'General Maintenance', 4.5, 'available', 0, 1),
('Bob Newby', 'bob.newby@radiohut.com', '4444444444', 'hashed_bob', 'Radio Shack, Hawkins, IN', 'IT & Electronics', 4.9, 'offline', 0, 1),
('Dr. Martin Brenner', 'brenner@hawkinslab.com', '9999999999', 'admin_brenner', 'Hawkins Lab, IN', 'Administration', 5.0, 'available', 1, 1);



INSERT INTO clients 
(name, email, phone, password, address, isAdmin, status) 
VALUES
('Mike Wheeler', 'mike.wheeler@gmail.com', '5551112222', 'hashed_mike', 'Wheeler House, Hawkins, IN', 0, 1),
('Eleven', 'eleven@gmail.com', '5552223333', 'hashed_eleven', 'Cabin in the Woods, Hawkins, IN', 0, 1),
('Dustin Henderson', 'dustin.henderson@gmail.com', '5553334444', 'hashed_dustin', 'Henderson House, Hawkins, IN', 0, 1),
('Lucas Sinclair', 'lucas.sinclair@gmail.com', '5554445555', 'hashed_lucas', 'Sinclair House, Hawkins, IN', 0, 1),
('Max Mayfield', 'max.mayfield@gmail.com', '5556667777', 'hashed_max', 'Mayfield Trailer Park, Hawkins, IN', 1, 1);


INSERT INTO bookings
(client_id, provider_id, problem_type, problem_description, status)
VALUES
(1, 1, 'Leakage', 'Water leaking from kitchen sink', 'pending'),
(2, 2, 'Power Issue', 'Frequent power cuts in living room', 'accepted'),
(3, 3, 'Cooling Problem', 'AC not cooling properly', 'in_progress'),
(4, 4, 'Furniture Repair', 'Broken wooden chair leg', 'completed'),
(1, 2, 'Wiring', 'Need new wiring for bedroom lights', 'cancelled');
